# Memory System

How the learning system tracks and remembers your progress.

## Overview

The memory system maintains context about your learning journey across sessions:

```
.claude/memory/
├── learner_profile.json    # Your configuration
├── progress_log.jsonl      # Event history
├── decisions.jsonl         # Important decisions
├── best_practices.md       # Your learnings
├── latest_evaluation.json  # Most recent eval
└── latest_proposals.json   # Recent adaptations
```

---

## Memory Files

### learner_profile.json

Your learning configuration and current state.

```json
{
  "level": "Beginner",
  "start_date": "2026-01-01",
  "goals": [
    "Learn Python for data science",
    "Build practical AI projects"
  ],
  "constraints": {
    "hours_per_week": 10,
    "preferred_schedule": "evenings and weekends",
    "timezone": "UTC"
  },
  "current_state": {
    "current_month": 1,
    "current_week": 1,
    "status": "active"
  }
}
```

**Updates**: When level changes, month/week progresses

### progress_log.jsonl

Append-only event log of your journey.

```jsonl
{"timestamp": "2026-01-01T00:00:00Z", "event": "journey_started", "level": "Beginner"}
{"timestamp": "2026-01-07T18:00:00Z", "event": "week_completed", "month": 1, "week": 1}
{"timestamp": "2026-01-14T18:00:00Z", "event": "evaluation_run", "score": 81}
```

**Events logged**:
- `journey_started`
- `week_completed`
- `month_completed`
- `evaluation_run`
- `project_shipped`
- `level_changed`

### decisions.jsonl

Important decisions and their rationale.

```jsonl
{"timestamp": "2026-01-01T00:00:00Z", "decision": "level_selected", "value": "Beginner"}
{"timestamp": "2026-02-01T00:00:00Z", "decision": "project_swapped", "from": "A", "to": "B", "rationale": "Better fit for goals"}
```

**Decisions logged**:
- Level selection/changes
- Project swaps
- Remediation weeks
- Month reordering

### best_practices.md

Living document of learnings.

```markdown
# Best Practices

## Python
- **Use list comprehensions** - More readable than loops

## Testing
- **Write tests before refactoring** - Safety net for changes
```

**Updated via**: `/add-best-practice` command

---

## Derived Artifacts

Some files are generated from memory:

### tracker.md

Located at `paths/Beginner/tracker.md`

Generated by `report.py` from:
- learner_profile.json
- progress_log.jsonl
- latest_evaluation.json

**Can be regenerated anytime**—don't edit directly.

---

## Memory Principles

### Append-Only Logs

`progress_log.jsonl` and `decisions.jsonl` are append-only:
- Never edit past entries
- Only add new lines
- Preserves history

### Source of Truth

Memory files are the source of truth:
- Other files (tracker.md) are derived
- Derived files can be regenerated
- Always trust memory files

### Privacy

Memory stays in your repository:
- Not sent externally
- You control the data
- Can delete anytime

---

## Working with Memory

### Reading Memory

Claude Code reads memory to understand context:

```python
# Example: Reading profile
import json
with open('.claude/memory/learner_profile.json') as f:
    profile = json.load(f)
print(f"Level: {profile['level']}")
```

### Writing to Memory

Events are logged automatically by commands. You can also log manually:

```python
import json
from datetime import datetime

event = {
    "timestamp": datetime.now().isoformat(),
    "event": "custom_event",
    "details": "Something happened"
}

with open('.claude/memory/progress_log.jsonl', 'a') as f:
    f.write(json.dumps(event) + '\n')
```

### Updating Profile

Profile updates happen at key moments:

```python
import json

with open('.claude/memory/learner_profile.json') as f:
    profile = json.load(f)

profile['current_state']['current_week'] = 2

with open('.claude/memory/learner_profile.json', 'w') as f:
    json.dump(profile, f, indent=2)
```

---

## Memory in Evaluation

The evaluation engine uses memory:

1. **evaluate.py** reads:
   - learner_profile.json (current state)
   - progress_log.jsonl (activity)
   - Git history (commits)

2. **adapt.py** reads:
   - latest_evaluation.json (scores)
   - learner_profile.json (constraints)

3. **report.py** reads:
   - All of the above
   - Generates tracker.md

---

## Troubleshooting

### Memory File Missing

Regenerate from template:

```python
# Default profile
profile = {
    "level": "Beginner",
    "start_date": "2026-01-01",
    "current_state": {"current_month": 1, "current_week": 1}
}
```

### Corrupted JSONL

Check for malformed lines:

```bash
python -c "
import json
with open('.claude/memory/progress_log.jsonl') as f:
    for i, line in enumerate(f, 1):
        try:
            json.loads(line)
        except:
            print(f'Error on line {i}')
"
```

### Reset Memory

To start fresh (preserves learnings):

1. Backup `best_practices.md`
2. Delete memory files
3. Regenerate defaults
4. Restore best practices
